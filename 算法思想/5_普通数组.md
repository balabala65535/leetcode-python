
### **普通数组算法知识体系详解**  
数组是最基础且高频的数据结构，90%的算法问题都直接或间接用到数组操作。以下是针对普通数组（非链表、树等衍生结构）的**系统化整理**，涵盖核心操作、解题方法、分类例题及优化技巧。

---

## **一、数组的核心操作**
### **1. 基础操作**
| **操作**       | **时间复杂度** | **典型应用**                     |
|----------------|----------------|----------------------------------|
| 随机访问       | O(1)           | 直接通过索引读取/修改元素        |
| 遍历           | O(n)           | 求和、找最大值、统计频率         |
| 插入/删除（非末尾） | O(n)          | 需要移动元素（如删除重复项）     |

### **2. 常用技巧**
- **双指针**：处理有序数组、去重、滑动窗口等。  
- **前缀和**：快速计算子数组和（适合频繁查询）。  
- **差分数组**：区间批量增减操作（如航班预订统计）。  

---

## **二、数组问题的六大解法**
### **1. 双指针法**
**适用场景**：有序数组、去重、合并、滑动窗口等。  
**例题**：  
- [26. 删除有序数组中的重复项](https://leetcode.com/problems/remove-duplicates-from-sorted-array/)  
- [167. 两数之和 II（有序数组）](https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/)  

**模板**：  
```python
left = 0
for right in range(len(nums)):
    if nums[right] != nums[left]:  # 去重逻辑
        left += 1
        nums[left] = nums[right]
return left + 1
```

### **2. 前缀和（Prefix Sum）**
**适用场景**：频繁查询子数组和、区间和问题。  
**例题**：  
- [303. 区域和检索 - 数组不可变](https://leetcode.com/problems/range-sum-query-immutable/)  
- [560. 和为K的子数组](https://leetcode.com/problems/subarray-sum-equals-k/)  

**模板**：  
```python
prefix = [0] * (len(nums) + 1)
for i in range(len(nums)):
    prefix[i+1] = prefix[i] + nums[i]  # prefix[j] - prefix[i] = sum(nums[i..j-1])
```

### **3. 差分数组（Difference Array）**
**适用场景**：区间批量增减操作（如对区间内所有元素+1）。  
**例题**：  
- [370. 区间加法](https://leetcode.com/problems/range-addition/)  
- [1109. 航班预订统计](https://leetcode.com/problems/corporate-flight-bookings/)  

**模板**：  
```python
diff = [0] * (len(nums) + 1)
for l, r, val in updates:  # 对区间[l..r]增加val
    diff[l] += val
    diff[r+1] -= val

# 通过差分数组还原原数组
for i in range(1, len(diff)):
    diff[i] += diff[i-1]
```

### **4. 二分查找**
**适用场景**：有序数组中的查找、边界问题。  
**例题**：  
- [704. 二分查找](https://leetcode.com/problems/binary-search/)  
- [34. 在排序数组中查找元素的第一个和最后一个位置](https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/)  

**模板**：  
```python
left, right = 0, len(nums) - 1
while left <= right:
    mid = (left + right) // 2
    if nums[mid] == target:
        return mid
    elif nums[mid] < target:
        left = mid + 1
    else:
        right = mid - 1
return -1
```

### **5. 模拟与数学技巧**
**适用场景**：旋转数组、螺旋矩阵、数学规律题。  
**例题**：  
- [48. 旋转图像](https://leetcode.com/problems/rotate-image/)  
- [54. 螺旋矩阵](https://leetcode.com/problems/spiral-matrix/)  

**关键点**：  
- 旋转矩阵：先转置再翻转每一行。  
- 螺旋矩阵：设定上下左右边界，按层遍历。

### **6. 原地操作（In-place）**
**适用场景**：空间复杂度要求O(1)的问题。  
**例题**：  
- [283. 移动零](https://leetcode.com/problems/move-zeroes/)  
- [41. 缺失的第一个正数](https://leetcode.com/problems/first-missing-positive/)  

**技巧**：  
- 用数组本身存储状态（如用正负号标记是否出现）。  
- 交换元素代替删除（如移动零到末尾）。

---

## **三、高频问题分类**
### **1. 子数组问题**
| 问题类型               | 解法                | 例题                                                                 |
|------------------------|---------------------|----------------------------------------------------------------------|
| 最大子数组和           | 动态规划/Kadane算法 | [53. 最大子数组和](https://leetcode.com/problems/maximum-subarray/)  |
| 乘积最大子数组         | 动态规划（维护max/min） | [152. 乘积最大子数组](https://leetcode.com/problems/maximum-product-subarray/) |
| 和为K的子数组          | 前缀和 + 哈希表     | [560. 和为K的子数组](https://leetcode.com/problems/subarray-sum-equals-k/) |

### **2. 排列与搜索**
| 问题类型               | 解法                | 例题                                                                 |
|------------------------|---------------------|----------------------------------------------------------------------|
| 下一个排列             | 数学规律            | [31. 下一个排列](https://leetcode.com/problems/next-permutation/)    |
| 搜索旋转排序数组       | 二分查找变体        | [33. 搜索旋转排序数组](https://leetcode.com/problems/search-in-rotated-sorted-array/) |

### **3. 其他经典问题**
| 问题类型               | 解法                | 例题                                                                 |
|------------------------|---------------------|----------------------------------------------------------------------|
| 合并区间               | 排序 + 贪心         | [56. 合并区间](https://leetcode.com/problems/merge-intervals/)       |
| 接雨水                 | 双指针/单调栈       | [42. 接雨水](https://leetcode.com/problems/trapping-rain-water/)     |

---

## **四、优化技巧**
1. **边界处理**：  
   - 检查数组是否为空或长度为1（避免越界）。  
2. **空间优化**：  
   - 用变量代替数组（如`prefix_sum`只需一个变量累加）。  
3. **遍历顺序**：  
   - 反向遍历可能更高效（如某些动态规划问题）。  

---

## **五、面试高频考点**
1. **如何选择双指针还是滑动窗口？**  
   - 双指针：通常用于有序数组或双向移动（如两数之和）。  
   - 滑动窗口：解决连续子数组/子串问题（如最小覆盖子串）。  
2. **前缀和和差分数组的区别？**  
   - 前缀和：用于快速查询区间和。  
   - 差分数组：用于批量修改区间值。  
3. **如何证明贪心算法的正确性？**  
   - 通过反证法或数学归纳法（如区间调度问题）。  

---

掌握这些方法后，普通数组类问题可以系统化解决。如果需要更具体的题目解析或代码实现细节，欢迎继续提问！