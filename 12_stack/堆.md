**栈（Stack）和堆（Heap）** 是计算机内存中两种不同的数据结构，它们在存储方式、管理机制、访问方式等方面有显著区别。以下是它们的核心区别：

---

### **1. 数据结构特性**
| **特性**       | **栈（Stack）**                     | **堆（Heap）**                     |
|----------------|-------------------------------------|------------------------------------|
| **数据结构**   | 线性结构，后进先出（LIFO）          | 树状结构（如二叉堆），无序或部分有序 |
| **操作限制**   | 只能从栈顶插入（push）和删除（pop） | 可以任意插入和删除（需维护堆性质）   |

---

### **2. 内存管理**
| **特性**       | **栈（Stack）**                     | **堆（Heap）**                     |
|----------------|-------------------------------------|------------------------------------|
| **分配方式**   | 编译器自动分配和释放（静态内存）     | 程序员手动分配/释放（动态内存）     |
| **速度**       | 快（仅移动栈指针）                  | 慢（需查找可用内存块）             |
| **碎片问题**   | 无碎片                              | 可能产生内存碎片                   |

---

### **3. 存储内容**
| **特性**       | **栈（Stack）**                     | **堆（Heap）**                     |
|----------------|-------------------------------------|------------------------------------|
| **存储内容**   | 局部变量、函数参数、返回地址         | 动态分配的对象（如 `new`/`malloc`）|
| **生命周期**   | 随函数调用结束自动释放               | 需显式释放（否则内存泄漏）         |

---

### **4. 访问方式**
| **特性**       | **栈（Stack）**                     | **堆（Heap）**                     |
|----------------|-------------------------------------|------------------------------------|
| **访问速度**   | 快（CPU缓存友好）                   | 慢（需间接寻址）                   |
| **灵活性**     | 大小固定（编译时确定）               | 大小可变（运行时动态调整）         |

---

### **5. 典型应用场景**
| **场景**       | **栈（Stack）**                     | **堆（Heap）**                     |
|----------------|-------------------------------------|------------------------------------|
| **用途**       | 函数调用、表达式求值、递归          | 动态数据结构（如链表、树、图）      |
| **语言示例**   | 所有局部变量（如C的 `int x`）        | `malloc`/`new` 分配的对象           |

---

### **6. 代码示例对比**
#### **栈（函数调用）**
```c
void foo() {
    int x = 10; // x存储在栈上
} // 函数结束，x自动释放
```

#### **堆（动态分配）**
```c
void bar() {
    int *y = malloc(sizeof(int)); // y指向堆内存
    *y = 20;
    free(y); // 必须手动释放！
}
```

---

### **7. 关键区别总结**
1. **管理方式**  
   - 栈：自动管理（编译器处理）。  
   - 堆：手动管理（易出错，如内存泄漏）。  

2. **分配效率**  
   - 栈：高效（仅移动指针）。  
   - 堆：低效（需复杂的内存管理算法）。  

3. **空间限制**  
   - 栈：大小固定（可能栈溢出，如无限递归）。  
   - 堆：空间更大（受系统虚拟内存限制）。  

4. **访问安全**  
   - 栈：变量生命周期严格绑定作用域。  
   - 堆：需防止悬垂指针（Dangling Pointer）或内存泄漏。

---

### **8. 常见面试问题**
- **为什么栈比堆快？**  
  栈的分配仅需移动指针，而堆需要查找可用内存块并处理碎片。  

- **递归为什么可能栈溢出？**  
  每次递归调用都会占用栈空间，深度过大时栈内存耗尽。  

- `malloc` 和 `new` 分配的内存在哪里？  
  在堆上，需手动释放（`free`/`delete`）。

---

理解栈和堆的区别对编写高效、安全的代码至关重要，尤其是在涉及递归、动态内存分配时！